<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Absensi QR</title>
    <style>
        body { font-family: sans-serif; padding: 30px; }
        #status { font-size: 18px; }
    </style>
</head>
<body>
    <h1>Absensi Masuk</h1>
    <div id="status">Menyiapkan absensi...</div>

    <script>
        // Ambil data dari parameter URL
        function getParam(key) {
            const params = new URLSearchParams(window.location.search);
            return params.get(key);
        }

        const id = getParam("id");
        const nama = getParam("nama");

        if (id && nama) {
            document.getElementById("status").innerText = `Mengirim data absensi untuk ${nama}...`;

            fetch("https://script.google.com/macros/s/AKfycbyihWhKx9OTRwtEWbfBObl4QofjET3jR6UswAkH4jX2XBTGxpXtnH3TZArSTbZETzmDtw/exec", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({ id: id, nama: nama })
            })
            .then(response => response.text())
            .then(result => {
                document.getElementById("status").innerText = "✅ Absen berhasil!";
            })
            .catch(error => {
                document.getElementById("status").innerText = "❌ Gagal mengirim absen!";
                console.error("Error:", error);
            });
        } else {
            document.getElementById("status").innerText = "❗ URL tidak lengkap (harus ada ?id=...&nama=...)";
        }
    </script>
</body>
</html>
